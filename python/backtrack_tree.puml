@startuml backtrack_tree
skinparam dpi 300
!theme plain

' 한글 폰트 설정
skinparam defaultFontName "Malgun Gothic"
skinparam titleFontName "Malgun Gothic"
skinparam noteFontName "Malgun Gothic"
skinparam legendFontName "Malgun Gothic"

title 백트래킹 알고리즘 탐색 트리 (N=3)

skinparam node {
  BackgroundColor LightBlue
  BorderColor Black
}

skinparam note {
  BackgroundColor Yellow
  BorderColor Orange
}

node "시작\npath=[]" as start

node "1 선택\npath=[1]\nused=[F,T,F,F]" as n1
node "2 선택\npath=[2]\nused=[F,F,T,F]" as n2
node "3 선택\npath=[3]\nused=[F,F,F,T]" as n3

node "1→2\npath=[1,2]\nused=[F,T,T,F]" as n12
node "1→3\npath=[1,3]\nused=[F,T,F,T]" as n13

node "2→1\npath=[2,1]\nused=[F,T,T,F]" as n21
node "2→3\npath=[2,3]\nused=[F,F,T,T]" as n23

node "3→1\npath=[3,1]\nused=[F,T,F,T]" as n31
node "3→2\npath=[3,2]\nused=[F,F,T,T]" as n32

node "결과: [1,2,3]" as r123 #LightGreen
node "결과: [1,3,2]" as r132 #LightGreen
node "결과: [2,1,3]" as r213 #LightGreen
node "결과: [2,3,1]" as r231 #LightGreen
node "결과: [3,1,2]" as r312 #LightGreen
node "결과: [3,2,1]" as r321 #LightGreen

start --> n1
start --> n2
start --> n3

n1 --> n12 : "2 선택 가능"
n1 --> n13 : "3 선택 가능"

n2 --> n21 : "1 선택 가능"
n2 --> n23 : "3 선택 가능"

n3 --> n31 : "1 선택 가능"
n3 --> n32 : "2 선택 가능"

n12 --> r123 : "3 선택"
n13 --> r132 : "2 선택"
n21 --> r213 : "3 선택"
n23 --> r231 : "1 선택"
n31 --> r312 : "2 선택"
n32 --> r321 : "1 선택"

note top of start
  백트래킹 시작점
  모든 숫자가 사용 가능
end note

note bottom of r123
  완성된 순열들
  총 3! = 6개
end note

legend right
  |색상|의미|
  |#LightBlue|탐색 중인 노드|
  |#LightGreen|완성된 순열|

  **백트래킹 과정:**
  1. 숫자를 선택하고 path에 추가
  2. used 배열에 사용 표시
  3. 재귀 호출로 다음 레벨 탐색
  4. 돌아와서 선택을 취소 (백트래킹)
  5. 다음 가능한 숫자로 시도
end legend

@enduml
